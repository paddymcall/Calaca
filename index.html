<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8'>
    <title>ElasticSarit</title>
    <link href='http://fonts.googleapis.com/css?family=Martel+Sans&subset=latin,devanagari,latin-ext' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' href='css/reset.css'>
    <link rel='stylesheet' type='text/css' href='css/calaca.css'>
    <link rel='stylesheet' type='text/css' href='css/local.css'>
    <!--[if IE]>
        <script src='http://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
    <![endif]-->
</head>
<body ng-app='calaca' ng-controller='calacaCtrl'>

<!-- Title and search box -->
<header class='jumbotron'>
  <h1 class='title'>Search the <a href="https://github.com/sarit/SARIT-corpus/">SARIT corpus</a></h1>
  <div class='search-box-container'>
    <input type='text' class='search-box' placeholder='Search' autofocus ng-model='query' ng-change='delayedSearch(0)' ng-init='initialSearch()'>
  </div>
</header>

<!-- Listing of search results -->
<main class='results-container'>
    <section class='pagination-controls'>
    <button ng-click='search(-1)' ng-show='paginationEnabled() && offset !== 0' class='pager'>Previous</button><button ng-click='search(1)' ng-show='paginationEnabled()' class='pager'>Next</button>
  </section>
  <section class='results-info'>
    <p id='response-details'>{{(hits | number) || 0}} {{resultsLabel || 'results'}} ({{(timeTook || 0)}}ms)</p>
    <p ng-show='paginationEnabled()' id='pagination-details'>Showing {{paginationLowerBound}} - {{paginationUpperBound}}</p>
  </section>
  <section class='results'>
    <p class='no-results' ng-show='!results.length && !loading'>No Results</p>
    <article class='result' ng-repeat='result in results track by $id(result)'>
      <h2> {{result.author}}: {{result.title}}</h2>
      <ul class="highlighted {{ result.lang }}" ng-if="result._highlighted.text">
	<li ng-repeat="highText in result._highlighted.text" ng-bind-html="highText"></li>
      </ul>
      <p ng-if="!result._highlighted.text">{{result.text }}</p>
      <div class="metaInfo">
	<ul>
	  <li ng-if="result.sysId">SysID: {{result.sysId}}</li>
	  <li ng-if="result.revision">Revision: {{result.revision}}</li>
	  <li ng-if="result.path">Path: <a href="http://localhost:8080/read/{{result.revision}}/path/{{result.path}}">{{result.path}}</a></li>
	  <li ng-if="result.lnum">Line: <a href="http://localhost:8080/read/{{result.revision}}/line/{{result.lnum}}">{{result.lnum}}</a></li>
	  <li ng-if="result.offset">Offset: <a href="http://localhost:8080/read/{{result.revision}}/pos/{{result.offset}}">{{result.offset}}</a></li></li>
	  <li ng-if="result.score">Score: {{result._score}}</li>
	  <li ng-if="result.lang">Lang: {{ result.lang }}</li>
	  <li ng-if="result._id">ElasticID: {{ result._id }}</li>
	</ul>
      </div>
    </article>
  </section>
  <section class='pagination-controls'>
    <button ng-click='search(-1)' ng-show='paginationEnabled() && offset !== 0' class='pager'>Previous</button><button ng-click='search(1)' ng-show='paginationEnabled()' class='pager'>Next</button>
  </section>
</main>

<!-- Load resources -->
<script src='bower_components/angular/angular.min.js' type='text/javascript'></script>
<!-- for sanitizing, see https://docs.angularjs.org/api/ngSanitize --->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-sanitize.js"></script>
<script src='bower_components/angular-animate/angular-animate.min.js' type='text/javascript'></script>
<script src='bower_components/elasticsearch/elasticsearch.angular.min.js' type='text/javascript'></script>
<script src='js/config.js' type='text/javascript'></script>
<script src='js/app.js' type='text/javascript'></script>
<script src='js/controllers.js' type='text/javascript'></script>
<script src='js/services.js' type='text/javascript'></script>
</body>
</html>
